parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"zVvH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_MEMO=exports.STATIC_INDEX=exports.DRAG_INDEX=exports.GRID_SIZE=exports.MARGIN=void 0;const e=48;exports.MARGIN=48;const t=10;exports.GRID_SIZE=10;const o="99999";exports.DRAG_INDEX="99999";const s="99998";exports.STATIC_INDEX="99998";const n={id:"9346dc6c-f982-48ce-9e21-f6a334b367b3",text:"Manifest is a grid-based pinboard for note taking.\n\nSimply click and drag anywhere to create a memo and snap it to the grid. All memos can be moved, resized, deleted and are saved in your browser's local storage between sessions.\n\nTo toggle between dark and light modes you can press Alt + T.\n\nManifest is free and completely open-source. If you find a bug or have a suggestion feel free to file an issue on Github.\n\nhttps://github.com/jonathontoon/manifest/issues",position:{top:50,left:50},size:{width:379,height:309}};exports.DEFAULT_MEMO=n;
},{}],"MgTz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.confirm=t,exports.setLocalStorageItem=o,exports.getLocalStorageItem=r,exports.snapToGrid=n,exports.checkBounds=x,exports.generateUUID=s,exports.decreaseAllMemoIndexes=i;var e=require("./globals");function t(e){return window.confirm(e)}function o(e,t){return window.localStorage.setItem("".concat(e),JSON.stringify(t))}function r(e){return JSON.parse(window.localStorage.getItem(e))}function n(e,t){return t*Math.round(e/t)}function x(t,o){let r=null;return t.top>o.top&&(r={edge:"top",offset:0}),t.left>o.left&&(r={edge:"left",offset:0}),t.top+t.height<o.top+o.height&&(r={edge:"bottom",offset:n(t.height-o.height,e.GRID_SIZE)}),t.left+t.width<o.left+o.width&&(r={edge:"right",offset:n(t.width-o.width,e.GRID_SIZE)}),r}function s(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random();return("x"===e?t:8|3&t).toString(16)})}function i(){const e=document.getElementsByClassName("memo");for(const t of e){let e=t.style.zIndex;t.style.zIndex=--e}}
},{"./globals":"zVvH"}],"dKQo":[function(require,module,exports) {

},{}],"QvaY":[function(require,module,exports) {
"use strict";var e=require("./globals"),t=require("./utils");require("../sass/index.scss");let s,o,n,c,i,a,d,r="light";function u(e){e.target===c?L(e):"drag"===e.target.classList[0]?m(e):"resize"===e.target.classList[0]&&f(e)}function l(e){r=e.matches?"dark":"light",x()}function h(o,n,c,i){const a=document.createElement("div");a.setAttribute("data-id",o),a.classList.add("memo"),a.style.top="".concat(c.top,"px"),a.style.left="".concat(c.left,"px"),a.style.width="".concat(i.width,"px"),a.style.height="".concat(i.height,"px"),a.style.zIndex=e.STATIC_INDEX;const d=document.createElement("textarea");d.classList.add("input"),d.setAttribute("placeholder","Add a short memo..."),d.setAttribute("autocomplete",!0),n&&(d.value=n),d.addEventListener("focus",function(o){o.target.classList.add("active"),(0,t.decreaseAllMemoIndexes)(),(s=o.target.parentNode).style.zIndex=e.STATIC_INDEX}),d.addEventListener("blur",function(e){e.target.classList.remove("active")},{passive:!1,useCapture:!1}),d.addEventListener("input",function(e){const s=(0,t.getLocalStorageItem)("manifest_memos");s[o]={...s[o],text:e.target.value},(0,t.setLocalStorageItem)("manifest_memos",s)},{passive:!1,useCapture:!1}),a.appendChild(d);const r=document.createElement("div");r.classList.add("drag"),r.addEventListener("mousedown",u),r.addEventListener("touchstart",u),a.appendChild(r);const l=document.createElement("div");l.classList.add("close"),l.innerHTML="â€“",l.addEventListener("mouseup",v),l.addEventListener("touchend",v),a.appendChild(l);const h=document.createElement("div");return h.classList.add("resize"),h.addEventListener("mousedown",u),h.addEventListener("touchstart",u),a.appendChild(h),a}function m(o){if(1===o.which||o.touches){(0,t.decreaseAllMemoIndexes)(),(s=o.target.parentNode).classList.add("active"),s.style.zIndex=e.STATIC_INDEX,s.querySelectorAll(".input")[0].blur(),o.target.style.backgroundColor="var(--gray)",o.target.style.cursor="grabbing",document.body.style.cursor="grabbing";const n=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientX,e.GRID_SIZE):(0,t.snapToGrid)(o.clientX,e.GRID_SIZE),c=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientY,e.GRID_SIZE):(0,t.snapToGrid)(o.clientY,e.GRID_SIZE);a={x:n,y:c},document.addEventListener("mousemove",p,{passive:!1,useCapture:!1}),document.addEventListener("touchmove",p,{passive:!1,useCapture:!1}),document.addEventListener("mouseup",g,{passive:!1,useCapture:!1}),document.addEventListener("touchcancel",g,{passive:!1,useCapture:!1}),document.addEventListener("touchend",g,{passive:!1,useCapture:!1})}}function p(o){if(s.classList.contains("active")){const n=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientX,e.GRID_SIZE):(0,t.snapToGrid)(o.clientX,e.GRID_SIZE),c=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientY,e.GRID_SIZE):(0,t.snapToGrid)(o.clientY,e.GRID_SIZE);s.style.top="".concat(s.offsetTop-(a.y-c),"px"),s.style.left="".concat(s.offsetLeft-(a.x-n),"px"),a={x:n,y:c}}}function g(o){const n=(0,t.checkBounds)(c.getBoundingClientRect(),s.getBoundingClientRect()),i=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientX,e.GRID_SIZE):(0,t.snapToGrid)(o.clientX,e.GRID_SIZE),d=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientY,e.GRID_SIZE):(0,t.snapToGrid)(o.clientY,e.GRID_SIZE);let r=s.offsetTop-(a.y-d),u=s.offsetLeft-(a.x-i);n&&("top"===n.edge?r=n.offset:"bottom"===n.edge?r=n.offset:"left"===n.edge?u=n.offset:"right"===n.edge&&(u=n.offset)),s.style.top="".concat(r,"px"),s.style.left="".concat(u,"px"),s.classList.remove("active");const l=s.querySelectorAll(".drag")[0];l.style.cursor="grab",l.style.backgroundColor="transparent",s.querySelectorAll(".input")[0].focus();const h=s.dataset.id,m=(0,t.getLocalStorageItem)("manifest_memos");m[h]={...m[h],position:{top:r,left:u}},(0,t.setLocalStorageItem)("manifest_memos",m),document.body.style.cursor=null,s=null,a=null,document.removeEventListener("mousemove",p),document.removeEventListener("touchmove",p),document.removeEventListener("mouseup",g),document.removeEventListener("touchcancel",g),document.removeEventListener("touchend",g)}function v(e){if((0,t.confirm)("Are you sure you want to remove this memo?")){const s=e.target.parentNode.dataset.id,o=(0,t.getLocalStorageItem)("manifest_memos");delete o[s],(0,t.setLocalStorageItem)("manifest_memos",o),c.removeChild(e.target.parentNode)}}function f(o){if(1===o.which||o.touches){(0,t.decreaseAllMemoIndexes)(),(s=o.target.parentNode).classList.add("active"),s.style.zIndex=e.STATIC_INDEX,s.querySelectorAll(".input")[0].blur(),document.body.style.cursor="nw-resize",o.target.style.backgroundColor="var(--gray)";const n=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientX,e.GRID_SIZE):(0,t.snapToGrid)(o.clientX,e.GRID_SIZE),c=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientY,e.GRID_SIZE):(0,t.snapToGrid)(o.clientY,e.GRID_SIZE),i=s.getBoundingClientRect(),r=parseInt(i.width,10),u=parseInt(i.height,10);a={x:n,y:c},d={width:r,height:u},document.addEventListener("mousemove",E,{passive:!1,useCapture:!1}),document.addEventListener("touchmove",E,{passive:!1,useCapture:!1}),document.addEventListener("mouseup",I,{passive:!1,useCapture:!1}),document.addEventListener("touchcancel",I,{passive:!1,useCapture:!1}),document.addEventListener("touchend",I,{passive:!1,useCapture:!1})}}function E(o){if(s.classList.contains("active")){const n=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientX,e.GRID_SIZE):(0,t.snapToGrid)(o.clientX,e.GRID_SIZE),c=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientY,e.GRID_SIZE):(0,t.snapToGrid)(o.clientY,e.GRID_SIZE),i=d.width+(n-a.x)-2,r=d.height+(c-a.y)-2;s.style.width="".concat(i,"px"),s.style.height="".concat(r,"px")}}function I(o){const n=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientX,e.GRID_SIZE):(0,t.snapToGrid)(o.clientX,e.GRID_SIZE),i=o.touches&&0<o.touches.length?(0,t.snapToGrid)(o.touches[0].clientY,e.GRID_SIZE):(0,t.snapToGrid)(o.clientY,e.GRID_SIZE),r=d.width+(n-a.x)-2,u=d.height+(i-a.y)-2;s.style.width="".concat(r,"px"),s.style.height="".concat(u,"px");const l=(0,t.checkBounds)(c.getBoundingClientRect(),s.getBoundingClientRect());if(l){let e=s.offsetTop,t=s.offsetLeft;"top"===l.edge?e=l.offset:"bottom"===l.edge?e=l.offset:"left"===l.edge?t=l.offset:"right"===l.edge&&(t=l.offset),s.style.top="".concat(e,"px"),s.style.left="".concat(t,"px")}const h=s.querySelectorAll(".resize")[0];h.style.cursor="nw-resize",h.style.backgroundColor="transparent",s.classList.remove("active"),s.querySelectorAll(".input")[0].focus();const m=s.dataset.id,p=(0,t.getLocalStorageItem)("manifest_memos");p[m]={...p[m],size:{width:r,height:u}},(0,t.setLocalStorageItem)("manifest_memos",p),document.body.style.cursor=null,s=null,d=null,document.removeEventListener("mousemove",E,{passive:!1,useCapture:!1}),document.removeEventListener("touchmove",E,{passive:!1,useCapture:!1}),document.removeEventListener("mouseup",I,{passive:!1,useCapture:!1}),document.removeEventListener("touchcancel",I,{passive:!1,useCapture:!1}),document.removeEventListener("touchend",I,{passive:!1,useCapture:!1})}function L(s){if(1===s.which||s.touches){document.body.style.cursor="crosshair",c.classList.add("active");const o=c.getBoundingClientRect(),n=s.touches&&0<s.touches.length?(0,t.snapToGrid)(s.touches[0].clientX-o.left,e.GRID_SIZE):(0,t.snapToGrid)(s.clientX-o.left,e.GRID_SIZE),d=s.touches&&0<s.touches.length?(0,t.snapToGrid)(s.touches[0].clientY-o.top,e.GRID_SIZE):(0,t.snapToGrid)(s.clientY-o.top,e.GRID_SIZE);a={x:n,y:d},(i=document.createElement("div")).setAttribute("id","selection"),i.style.zIndex=e.DRAG_INDEX,c.appendChild(i),document.addEventListener("mousemove",y),document.addEventListener("touchmove",y),document.addEventListener("mouseup",G),document.addEventListener("touchcancel",G),document.addEventListener("touchend",G)}}function y(s){const o=c.getBoundingClientRect(),n=s.touches&&0<s.touches.length?(0,t.snapToGrid)(s.touches[0].clientX-o.left,e.GRID_SIZE):(0,t.snapToGrid)(s.clientX-o.left,e.GRID_SIZE),d=s.touches&&0<s.touches.length?(0,t.snapToGrid)(s.touches[0].clientY-o.top,e.GRID_SIZE):(0,t.snapToGrid)(s.clientY-o.top,e.GRID_SIZE),r=0>d-a.y?d:a.y,u=0>n-a.x?n:a.x,l=Math.abs(n-a.x)+1,h=Math.abs(d-a.y)+1;i.style.top="".concat(r,"px"),i.style.left="".concat(u,"px"),i.style.width="".concat(l,"px"),i.style.height="".concat(h,"px")}function G(){const e=c.getBoundingClientRect(),o=i.getBoundingClientRect(),n=o.width-2,a=o.height-2;let d=o.top-e.top,r=o.left-e.left;const u=(0,t.checkBounds)(e,o);if(u&&("top"===u.edge?d=u.offset:"bottom"===u.edge?d=u.offset:"left"===u.edge?r=u.offset:"right"===u.edge&&(r=u.offset)),80<=n&&80<=a){const e=(0,t.generateUUID)(),o=h(e,null,{top:d,left:r},{width:n,height:a});c.appendChild(o),o.querySelectorAll(".input")[0].focus();const i=(0,t.getLocalStorageItem)("manifest_memos");i[e]={text:null,position:{top:d,left:r},size:{width:n,height:a}},(0,t.setLocalStorageItem)("manifest_memos",i),s=o}document.body.style.cursor=null,c.classList.remove("active"),c.removeChild(i),document.removeEventListener("mousemove",y,{passive:!1,useCapture:!1}),document.removeEventListener("touchmove",y,{passive:!1,useCapture:!1}),document.removeEventListener("mouseup",G,{passive:!1,useCapture:!1}),document.removeEventListener("touchcancel",G,{passive:!1,useCapture:!1}),document.removeEventListener("touchend",G,{passive:!1,useCapture:!1})}function _(){const e=document.documentElement;"light"===r?(e.classList.remove("light"),e.classList.add("dark"),r="dark",(0,t.setLocalStorageItem)("manifest_theme","dark")):(e.classList.remove("dark"),e.classList.add("light"),r="light",(0,t.setLocalStorageItem)("manifest_theme","light")),x()}function S(){const e=document.documentElement,s=(0,t.getLocalStorageItem)("manifest_theme");return s?void("dark"===s?(e.classList.remove("light"),e.classList.add("dark"),r="dark",(0,t.setLocalStorageItem)("manifest_theme","dark")):(e.classList.remove("dark"),e.classList.add("light"),r="light",(0,t.setLocalStorageItem)("manifest_theme","light"))):void(window.matchMedia("(prefers-color-scheme: dark)").matches?r="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(r="light"))}function C(e){("KeyT"===e.code||84===e.keyCode)&&e.altKey&&_()}function x(){o.style.width="".concat(window.innerWidth,"px"),o.style.height="".concat(window.innerHeight,"px");const t=window.innerWidth-e.MARGIN-1,s=window.innerHeight-e.MARGIN+1;n.setAttribute("width",t),n.setAttribute("height",s),n.style.top="".concat(e.MARGIN/2,"px"),n.style.left="".concat(e.MARGIN/2,"px"),n.style.width="".concat(t,"px"),n.style.height="".concat(s,"px");const i=n.getContext("2d");for(let o=0;o<=t;o+=e.GRID_SIZE)for(let t=0;t<=s;t+=e.GRID_SIZE)i.fillStyle="light"===r?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.4)",i.beginPath(),i.rect(o,t,1,1),i.fill();c.style.top="".concat(e.MARGIN/2,"px"),c.style.left="".concat(e.MARGIN/2,"px"),c.style.width="".concat(t,"px"),c.style.height="".concat(s,"px"),a=null,d=null}function T(){S(),(o=document.createElement("main")).setAttribute("id","app"),(n=document.createElement("canvas")).setAttribute("id","grid"),(c=document.createElement("section")).setAttribute("id","board"),c.addEventListener("mousedown",u,{passive:!1,useCapture:!1}),c.addEventListener("touchstart",u,{passive:!1,useCapture:!1}),o.appendChild(n),o.appendChild(c),document.body.appendChild(o),document.body.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1,useCapture:!1});const s=(0,t.getLocalStorageItem)("manifest_memos");if(s&&0!==Object.keys(s).length)for(const e of Object.keys(s)){const t=h(e,s[e].text,s[e].position,s[e].size);c.appendChild(t)}else{const s=h(e.DEFAULT_MEMO.id,e.DEFAULT_MEMO.text,e.DEFAULT_MEMO.position,e.DEFAULT_MEMO.size);c.appendChild(s);const o={};o[e.DEFAULT_MEMO.id]={text:e.DEFAULT_MEMO.text,position:e.DEFAULT_MEMO.position,size:e.DEFAULT_MEMO.size},(0,t.setLocalStorageItem)("manifest_memos",o)}x()}window.addEventListener("resize",x),window.addEventListener("load",T),window.addEventListener("keydown",C),window.matchMedia("(prefers-color-scheme: dark)").addListener(l);
},{"./globals":"zVvH","./utils":"MgTz","../sass/index.scss":"dKQo"}]},{},["QvaY"], null)
//# sourceMappingURL=js.00a46daa.js.map